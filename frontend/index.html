<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outreach Intelligence ‚Äî Email SaaS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">Outreach</h1>
                <p class="logo-sub">Intelligence</p>
            </div>
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" onclick="navigateTo('dashboard')">
                    <span class="nav-icon">‚óâ</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="#leads" class="nav-item" onclick="navigateTo('leads')">
                    <span class="nav-icon">‚óê</span>
                    <span class="nav-text">Leads</span>
                </a>
                <a href="#analytics" class="nav-item" onclick="navigateTo('analytics')">
                    <span class="nav-icon">‚óà</span>
                    <span class="nav-text">Analytics</span>
                </a>
                <a href="#reports" class="nav-item" onclick="navigateTo('reports')">
                    <span class="nav-icon">‚óî</span>
                    <span class="nav-text">Reports</span>
                </a>
                <a href="#logs" class="nav-item" onclick="navigateTo('logs')">
                    <span class="nav-icon">‚óé</span>
                    <span class="nav-text">Logs</span>
                </a>
                <a href="#templates" class="nav-item" onclick="navigateTo('templates')">
                    <span class="nav-icon">‚úâ</span>
                    <span class="nav-text">Templates</span>
                </a>
                <a href="#settings" class="nav-item" onclick="navigateTo('settings')">
                    <span class="nav-icon">‚öô</span>
                    <span class="nav-text">Settings</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <p class="subtitle">Your dedicated 24/7 outreach engine</p>
                </div>

                <!-- Metrics Cards -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">SENT TODAY:</div>
                        <div class="metric-value" id="sentToday">0 / 500</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">REPLIES:</div>
                        <div class="metric-value" id="replies">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">FAILED:</div>
                        <div class="metric-value" id="failed">0</div>
                    </div>
                    <div class="metric-card status-card">
                        <div class="metric-label">CAMPAIGN STATUS</div>
                        <div class="status-badge" id="campaignStatus">Stopped</div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-section">
                    <div class="progress-header">
                        <span>Daily Progress</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <!-- Command Center -->
                <div class="command-section">
                    <h2>Command Center</h2>
                    <div class="button-grid">
                        <button class="btn btn-start" onclick="startCampaign()">‚ñ∂ START</button>
                        <button class="btn btn-pause" onclick="pauseCampaign()">‚è∏ PAUSE</button>
                        <button class="btn btn-stop" onclick="stopCampaign()">‚èπ STOP</button>
                    </div>
                </div>

                <!-- Upload Leads -->
                <div class="upload-section">
                    <h2>Upload Leads</h2>
                    <div class="upload-box">
                        <div class="upload-area" id="uploadArea">
                            <p>üìÅ Drag and drop CSV file here, or click to browse</p>
                            <input type="file" id="csvFile" accept=".csv" style="display: none;">
                            <p class="upload-hint" id="uploadHint" style="margin-top: 10px; color: #666; font-size: 14px;"></p>
                        </div>
                        <button class="btn btn-upload" onclick="uploadLeads()">üì§ UPLOAD CSV</button>
                    </div>
                </div>

                <!-- Replied / Meetings pipeline -->
                <div class="pipeline-section">
                    <h2>Replied &amp; meeting pipeline</h2>
                    <p class="section-desc">Leads who replied ‚Äî calendar link sent automatically</p>
                    <div class="pipeline-stats">
                        <div class="pipeline-stat">
                            <span class="pipeline-value" id="repliedCount">0</span>
                            <span class="pipeline-label">Total replied</span>
                        </div>
                        <a href="#leads" class="pipeline-link" onclick="navigateTo('leads'); setTimeout(() => filterLeads('replied'), 100);">View replied leads ‚Üí</a>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="logs-section">
                    <h2>Recent activity</h2>
                    <div id="dashboardLogsContainer" class="logs-container"></div>
                </div>
            </div>

            <!-- Leads Page -->
            <div id="leads-page" class="page">
                <div class="page-header">
                    <h1>Lead Management</h1>
                    <p class="subtitle">Manage all your leads in one place</p>
                </div>

                <!-- Controls -->
                <div class="leads-controls">
                    <input type="text" id="leadSearch" class="search-input"
                        placeholder="Search by email, name, or company..." oninput="searchLeads()">

                    <div class="filter-tabs">
                        <button class="filter-tab active" onclick="filterLeads('all')">All</button>
                        <button class="filter-tab" onclick="filterLeads('pending')">Pending</button>
                        <button class="filter-tab" onclick="filterLeads('sent')">Sent</button>
                        <button class="filter-tab" onclick="filterLeads('replied')">Replied</button>
                        <button class="filter-tab" onclick="filterLeads('failed')">Failed</button>
                    </div>
                </div>

                <!-- Leads Table -->
                <div class="table-container">
                    <table id="leadsTable" class="leads-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                                <th onclick="sortLeads('email')">Email ‚Üï</th>
                                <th>Name</th>
                                <th>Company</th>
                                <th onclick="sortLeads('status')">Status ‚Üï</th>
                                <th onclick="sortLeads('last_sent_at')">Last Sent ‚Üï</th>
                                <th>Follow-ups</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="leadsTableBody">
                            <tr>
                                <td colspan="8" class="no-data">Loading leads...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="leadsPagination"></div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="page">
                <div class="page-header">
                    <h1>Analytics</h1>
                    <p class="subtitle">Insights and performance over time</p>
                </div>

                <div class="date-range-bar">
                    <label>Date range</label>
                    <input type="date" id="analyticsDateFrom" class="input-field date-input">
                    <span class="date-sep">‚Üí</span>
                    <input type="date" id="analyticsDateTo" class="input-field date-input">
                    <button type="button" class="btn btn-secondary" onclick="applyAnalyticsDateRange()">Apply</button>
                </div>

                <!-- Stats Summary -->
                <div class="analytics-stats">
                    <div class="stat-card">
                        <div class="stat-label">Total Leads</div>
                        <div class="stat-value" id="analyticsTotal">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Reply Rate</div>
                        <div class="stat-value" id="analyticsReplyRate">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Failure Rate</div>
                        <div class="stat-value" id="analyticsFailureRate">0%</div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>Emails Sent Over Time</h3>
                        <canvas id="timelineChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Lead Status Distribution</h3>
                        <canvas id="statusChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="reports-page" class="page">
                <div class="page-header">
                    <h1>Reports</h1>
                    <p class="subtitle">Daily analytics report ‚Äî preview and send</p>
                </div>
                <div class="reports-actions">
                    <button type="button" class="btn btn-primary" onclick="previewReport()">Preview report</button>
                    <button type="button" class="btn btn-success" onclick="sendReportNow()">Send report now</button>
                </div>
                <div id="reportPreviewCard" class="report-preview-card" style="display: none;">
                    <h3>Report preview</h3>
                    <div id="reportPreviewContent" class="report-preview-content"></div>
                </div>
            </div>

            <!-- Logs Page -->
            <div id="logs-page" class="page">
                <div class="page-header">
                    <h1>Logs</h1>
                    <p class="subtitle">Full activity and event log</p>
                </div>
                <div class="logs-controls">
                    <input type="text" id="logsSearch" class="search-input" placeholder="Search by event or email..." oninput="debounceSearchLogs()">
                    <span class="logs-meta" id="logsMeta">‚Äî</span>
                </div>
                <div class="table-container">
                    <table class="leads-table logs-table">
                        <thead>
                            <tr>
                                <th>Time (UTC)</th>
                                <th>Email</th>
                                <th>Event</th>
                            </tr>
                        </thead>
                        <tbody id="logsTableBody">
                            <tr><td colspan="3" class="no-data">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="pagination" id="logsPagination"></div>
            </div>

            <!-- Templates Page -->
            <div id="templates-page" class="page">
                <div class="page-header">
                    <h1>Email Templates</h1>
                    <p class="subtitle">Customize your outreach messages</p>
                </div>

                <!-- Available Variables -->
                <div class="variables-section">
                    <h3>Available Variables (click to insert)</h3>
                    <div id="variablesContainer" class="variables-tags">
                        <p class="no-data">Upload CSV to see available columns</p>
                    </div>
                </div>

                <!-- Template Grid -->
                <div class="template-grid">
                    <!-- Initial Email -->
                    <div class="template-column">
                        <h3>üìß Initial Email</h3>
                        <label>Subject</label>
                        <input type="text" id="initialSubject" class="input-field" placeholder="Enter subject">
                        <label>Body</label>
                        <div id="initialVariables" class="inline-variables"></div>
                        <textarea id="initialBody" class="textarea-field" rows="6"
                            placeholder="Email body. Use {{column_name}} for variables."></textarea>
                    </div>

                    <!-- Follow-up 1 -->
                    <div class="template-column">
                        <h3>üîÑ Follow-up 1 (after 3 days)</h3>
                        <label>Subject</label>
                        <input type="text" id="followup1Subject" class="input-field" placeholder="Enter subject">
                        <label>Body</label>
                        <div id="followup1Variables" class="inline-variables"></div>
                        <textarea id="followup1Body" class="textarea-field" rows="6"
                            placeholder="First follow-up body"></textarea>
                    </div>

                    <!-- Follow-up 2 -->
                    <div class="template-column">
                        <h3>üîÑ Follow-up 2 (after 6 days)</h3>
                        <label>Subject</label>
                        <input type="text" id="followup2Subject" class="input-field" placeholder="Enter subject">
                        <label>Body</label>
                        <div id="followup2Variables" class="inline-variables"></div>
                        <textarea id="followup2Body" class="textarea-field" rows="6"
                            placeholder="Second follow-up body"></textarea>
                    </div>

                    <!-- Auto-Reply Template -->
                    <div class="template-column">
                        <h3>üìÖ Auto-Reply (when they respond)</h3>
                        <label>Subject</label>
                        <input type="text" id="replySubject" class="input-field" placeholder="Enter subject">
                        <label>Body</label>
                        <div id="replyVariables" class="inline-variables"></div>
                        <textarea id="replyBody" class="textarea-field" rows="6"
                            placeholder="Auto-reply with calendar link. Use {{calendar_link}} for your calendar."></textarea>
                        <p style="font-size: 12px; color: #666; margin-top: 5px;">
                            üí° Available: {{first_name}}, {{company}}, {{calendar_link}}, {{email}}, and any CSV columns
                        </p>
                    </div>
                </div>

                <button class="btn btn-save" onclick="saveTemplates()">üíæ SAVE TEMPLATES</button>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page">
                <div class="page-header">
                    <h1>Settings</h1>
                    <p class="subtitle">Configure your outreach system</p>
                </div>

                <div class="settings-grid">
                    <!-- Email Configuration -->
                    <div class="settings-card">
                        <h3>üìß Email Configuration</h3>
                        <div class="setting-item">
                            <label>Email Address</label>
                            <input type="text" id="settingsEmail" class="input-field" readonly>
                        </div>
                        <div class="setting-item">
                            <label>SMTP Server</label>
                            <input type="text" id="settingsSMTP" class="input-field" readonly>
                        </div>
                        <div class="setting-item">
                            <label>Calendar Link</label>
                            <input type="text" id="settingsCalendar" class="input-field" readonly>
                        </div>
                    </div>

                    <!-- Sending Configuration -->
                    <div class="settings-card">
                        <h3>‚öôÔ∏è Sending Configuration</h3>
                        <div class="setting-item">
                            <label>Daily Email Limit</label>
                            <input type="number" id="settingsDailyLimit" class="input-field" readonly>
                        </div>
                        <div class="setting-item">
                            <label>Delay Between Emails (seconds)</label>
                            <input type="text" id="settingsDelay" class="input-field" readonly>
                        </div>
                        <div class="setting-item">
                            <label>Pause Every N Emails</label>
                            <input type="number" id="settingsPauseEvery" class="input-field" readonly>
                        </div>
                    </div>

                    <!-- License Information -->
                    <div class="settings-card">
                        <h3>üîê License Information</h3>
                        <div class="setting-item">
                            <label>License Key</label>
                            <input type="text" id="settingsLicense" class="input-field" readonly>
                        </div>
                        <div class="setting-item">
                            <label>Status</label>
                            <span class="status-badge" style="background: #90EE90; color: #2E7D32;">Active</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>